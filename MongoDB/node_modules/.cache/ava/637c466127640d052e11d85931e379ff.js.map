{"version":3,"sources":["theater-services.js"],"names":["test","t","newTheater","name","totalSales","movies","creation","request","app","post","send","theatersList","get","is","status","true","isArray","body","length","age","deepEqual","fetchTheater","_id","deleteTheater","delete","newTitans","price","attendees","createMovie","createTheater","addMovie","movieId"],"mappings":";;;;;AAAA;AACAA,KAAK,sBAAL,EAA6B,MAAMC,CAAN,IAAU;AAAA;AAAA;;AACnC,UAAMC,aAAa;AACfC,cAAM,KADS;AAEfC,oBAAY,GAFG;AAGfC,gBAAQ;AAHO,KAAnB;;AAMA,UAAMC,WAAW,MAAMC,QAAQC,GAAR,EACtBC,IADsB,CACjB,UADiB,EAEtBC,IAFsB,CAEjBR,UAFiB,CAAvB;;AAIA,UAAMS,eAAe,MAAMJ,QAAQC,GAAR,EAAaI,GAAb,CAAiB,WAAjB,CAA3B;;AAEAX,MAAEY,EAAF,CAAKF,aAAaG,MAAlB,EAA0B,GAA1B;AACAb,MAAEc,IAAF,uBAAO,+CAAMC,OAAN,YAAc,2DAAaC,IAA3B,6BAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACAhB,MAAEc,IAAF,yBAAO,oFAAaE,IAAb,6BAAkBC,MAAlB,wBAA2B,CAAlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACH,CAhBD;;AAkBAlB,KAAK,kBAAL,EAAyB,MAAMC,CAAN,IAAW;AAChC,UAAMC,aAAa;AACfC,cAAM,KADS;AAEfC,oBAAY,GAFG;AAGfC,gBAAQ;AAHO,KAAnB;;AAMA,UAAMC,WAAW,MAAMC,QAAQC,GAAR,EACtBC,IADsB,CACjB,UADiB,EAEtBC,IAFsB,CAEjBR,UAFiB,CAAvB;;AAIAD,MAAEY,EAAF,CAAKP,SAASQ,MAAd,EAAsB,GAAtB;AACAb,MAAEY,EAAF,CAAKX,WAAWC,IAAhB,EAAsBG,SAASW,IAAT,CAAcd,IAApC;AACAF,MAAEY,EAAF,CAAKX,WAAWiB,GAAhB,EAAqBb,SAASW,IAAT,CAAcE,GAAnC;AACAlB,MAAEmB,SAAF,CAAYlB,WAAWG,MAAvB,EAA+BC,SAASW,IAAT,CAAcZ,MAA7C;AACH,CAfD;;AAiBAL,KAAK,iBAAL,EAAwB,MAAMC,CAAN,IAAW;AAC/B,UAAMC,aAAa;AACfC,cAAM,KADS;AAEfC,oBAAY,GAFG;AAGfC,gBAAQ;AAHO,KAAnB;;AAMA,UAAMC,WAAW,MAAMC,QAAQC,GAAR,EACtBC,IADsB,CACjB,UADiB,EAEtBC,IAFsB,CAEjBR,UAFiB,CAAvB;;AAIA,UAAMmB,eAAe,MAAMd,QAAQC,GAAR,EAC1BI,GAD0B,CACrB,YAAWN,SAASW,IAAT,CAAcK,GAAI,EADR,CAA3B;;AAIArB,MAAEY,EAAF,CAAKQ,aAAaP,MAAlB,EAA0B,GAA1B;AACAb,MAAEmB,SAAF,CAAYd,SAASW,IAArB,EAA2BI,aAAaJ,IAAxC;AACH,CAjBD;;AAmBAjB,KAAK,kBAAL,EAAyB,MAAMC,CAAN,IAAW;AAChC,UAAMC,aAAa;AACfC,cAAM,KADS;AAEfC,oBAAY,GAFG;AAGfC,gBAAQ;AAHO,KAAnB;;AAMA,UAAMC,WAAW,MAAMC,QAAQC,GAAR,EACtBC,IADsB,CACjB,UADiB,EAEtBC,IAFsB,CAEjBR,UAFiB,CAAvB;;AAIA,UAAMqB,gBAAgB,MAAMhB,QAAQC,GAAR,EAC3BgB,MAD2B,CACnB,YAAWlB,SAASW,IAAT,CAAcK,GAAI,EADV,CAA5B;;AAGA,UAAMD,eAAe,MAAMd,QAAQC,GAAR,EAC1BI,GAD0B,CACrB,YAAWN,SAASW,IAAT,CAAcK,GAAI,OADR,CAA3B;;AAGArB,MAAEY,EAAF,CAAKU,cAAcT,MAAnB,EAA2B,GAA3B;AACAb,MAAEY,EAAF,CAAKQ,aAAaP,MAAlB,EAA0B,GAA1B;AAEH,CApBD;;AAsBAd,KAAK,0BAAL,EAAiC,MAAMC,CAAN,IAAW;AACxC,UAAMC,aAAa;AACfC,cAAM,KADS;AAEfC,oBAAY,GAFG;AAGfC,gBAAQ;AAHO,KAAnB;;AAMA,UAAMoB,YAAY;AACdtB,cAAM,QADQ;AAEduB,eAAO,CAFO;AAGdC,mBAAW;AAHG,KAAlB;;AAMA,UAAMC,cAAc,MAAMrB,QAAQC,GAAR,EACzBC,IADyB,CACpB,QADoB,EAEzBC,IAFyB,CAEpBe,SAFoB,CAA1B;;AAIA,UAAMI,gBAAgB,MAAMtB,QAAQC,GAAR,EAC3BC,IAD2B,CACtB,UADsB,EAE3BC,IAF2B,CAEtBR,UAFsB,CAA5B;;AAIA,UAAM4B,WAAW,MAAMvB,QAAQC,GAAR,EACtBC,IADsB,CAChB,YAAWoB,cAAcZ,IAAd,CAAmBK,GAAI,YADlB,EAEtBZ,IAFsB,CAEjB,EAACqB,SAAUH,YAAYX,IAAZ,CAAiBK,GAA5B,EAFiB,CAAvB;;AAIArB,MAAEY,EAAF,CAAKiB,SAAShB,MAAd,EAAsB,GAAtB;AAEH,CA3BD","file":"theater-services.js","sourcesContent":["//Theater Services\ntest('See list of theaters', async t =>{\n    const newTheater = {\n        name: 'Max', \n        totalSales: 130,\n        movies: []\n    }\n\n    const creation = await request(app)\n    .post('/theater')\n    .send(newTheater)\n\n    const theatersList = await request(app).get('/theaters')\n\n    t.is(theatersList.status, 200)\n    t.true(Array.isArray(theatersList.body))\n    t.true(theatersList.body.length > 0)\n})\n\ntest('Create a theater', async t => {\n    const newTheater = {\n        name: 'Max', \n        totalSales: 130,\n        movies: []\n    }\n\n    const creation = await request(app)\n    .post('/theater')\n    .send(newTheater)\n\n    t.is(creation.status, 200)\n    t.is(newTheater.name, creation.body.name)\n    t.is(newTheater.age, creation.body.age)\n    t.deepEqual(newTheater.movies, creation.body.movies)\n})\n\ntest('Fetch a theater', async t => {\n    const newTheater = {\n        name: 'Max', \n        totalSales: 130,\n        movies: []\n    }\n\n    const creation = await request(app)\n    .post('/theater')\n    .send(newTheater)\n\n    const fetchTheater = await request(app)\n    .get(`/theater/${creation.body._id}`)\n\n\n    t.is(fetchTheater.status, 200)\n    t.deepEqual(creation.body, fetchTheater.body)\n})\n\ntest('Delete a theater', async t => {\n    const newTheater = {\n        name: 'Max', \n        totalSales: 130,\n        movies: []\n    }\n\n    const creation = await request(app)\n    .post('/theater')\n    .send(newTheater)\n\n    const deleteTheater = await request(app)\n    .delete(`/theater/${creation.body._id}`)\n\n    const fetchTheater = await request(app)\n    .get(`/theater/${creation.body._id}/json`)\n    \n    t.is(deleteTheater.status, 200)\n    t.is(fetchTheater.status, 404)\n\n})\n\ntest('Add a movie to a theater', async t => {\n    const newTheater = {\n        name: 'Max', \n        totalSales: 130,\n        movies: []\n    }\n    \n    const newTitans = {\n        name: 'Titans', \n        price: 8,\n        attendees: []\n    }\n\n    const createMovie = await request(app)\n    .post('/movie')\n    .send(newTitans)\n\n    const createTheater = await request(app)\n    .post('/theater')\n    .send(newTheater)\n\n    const addMovie = await request(app)\n    .post(`/theater/${createTheater.body._id}/add-movie`)\n    .send({movieId : createMovie.body._id})\n    \n    t.is(addMovie.status, 200)\n\n})"]}