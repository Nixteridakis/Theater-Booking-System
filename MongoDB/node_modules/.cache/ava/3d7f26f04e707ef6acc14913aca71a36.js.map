{"version":3,"sources":["theater-services.js"],"names":["t","newTheater","name","totalSales","movies","creation","app","post","send","theatersList","get","is","status","true","isArray","body","length","age","deepEqual","fetchTheater","_id","deleteTheater","delete","newTitans","price","attendees","createMovie","createTheater","addMovie","movieId"],"mappings":"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","file":"theater-services.js","sourcesContent":["import test from 'ava'\nimport request from 'supertest'\nimport app from '../app'\n\n//Theater Services\ntest('See list of theaters', async t =>{\n    const newTheater = {\n        name: 'Max', \n        totalSales: 130,\n        movies: []\n    }\n\n    const creation = await request(app)\n    .post('/theater')\n    .send(newTheater)\n\n    const theatersList = await request(app).get('/theaters')\n\n    t.is(theatersList.status, 200)\n    t.true(Array.isArray(theatersList.body))\n    t.true(theatersList.body.length > 0)\n})\n\ntest('Create a theater', async t => {\n    const newTheater = {\n        name: 'Max', \n        totalSales: 130,\n        movies: []\n    }\n\n    const creation = await request(app)\n    .post('/theater')\n    .send(newTheater)\n\n    t.is(creation.status, 200)\n    t.is(newTheater.name, creation.body.name)\n    t.is(newTheater.age, creation.body.age)\n    t.deepEqual(newTheater.movies, creation.body.movies)\n})\n\ntest('Fetch a theater', async t => {\n    const newTheater = {\n        name: 'Max', \n        totalSales: 130,\n        movies: []\n    }\n\n    const creation = await request(app)\n    .post('/theater')\n    .send(newTheater)\n\n    const fetchTheater = await request(app)\n    .get(`/theater/${creation.body._id}`)\n\n\n    t.is(fetchTheater.status, 200)\n    t.deepEqual(creation.body, fetchTheater.body)\n})\n\ntest('Delete a theater', async t => {\n    const newTheater = {\n        name: 'Max', \n        totalSales: 130,\n        movies: []\n    }\n\n    const creation = await request(app)\n    .post('/theater')\n    .send(newTheater)\n\n    const deleteTheater = await request(app)\n    .delete(`/theater/${creation.body._id}`)\n\n    const fetchTheater = await request(app)\n    .get(`/theater/${creation.body._id}/json`)\n    \n    t.is(deleteTheater.status, 200)\n    t.is(fetchTheater.status, 404)\n\n})\n\ntest('Add a movie to a theater', async t => {\n    const newTheater = {\n        name: 'Max', \n        totalSales: 130,\n        movies: []\n    }\n    \n    const newTitans = {\n        name: 'Titans', \n        price: 8,\n        attendees: []\n    }\n\n    const createMovie = await request(app)\n    .post('/movie')\n    .send(newTitans)\n\n    const createTheater = await request(app)\n    .post('/theater')\n    .send(newTheater)\n\n    const addMovie = await request(app)\n    .post(`/theater/${createTheater.body._id}/add-movie`)\n    .send({movieId : createMovie.body._id})\n    \n    t.is(addMovie.status, 200)\n\n})"]}